
# Notes-keeper

## Требования

Необходимо спроектировать и реализовать на Golang сервис, предоставляющий REST API интерфейс с методами:
* добавление заметки
* вывод списка заметок

При сохранении заметок необходимо валидировать орфографические ошибки с помощью сервиса Яндекс.Спеллер. Также необходимо реализовать аутентификацию и авторизацию. Пользователи должны иметь доступ только к своим заметкам. Возможность регистрации не обязательна, допускается предустановленный набор пользователей (механизм хранения учетных записей любой, вплоть до hardcode в приложении).

## Используемые технологии

* Веб-фреймворк: `chi`
* База данных: `SQLite`

## Краткая информация по реализации

Всего было реализовано 5 эндпоинтов:

### Модель User:
* `POST /register`
* `POST /login`
* `POST /get_user_id`

### Модель Notes:
* `POST /create`
* `GET /notes`

При авторизации пользователю выдается токен, который сохраняется в куки. При попытке создания заметки или получения всего списка заметок производится проверка токена.

## Запуск сервиса

#### Сервис запускается локально из корня приложения:
```sh
go run cmd/main.go
```
#### Сборка Docker-образа:
```sh
docker build -t notes-keeper .
```

Где:
-t notes-keeper – задаёт имя и тег для образа.
. – указывает, что используемый Dockerfile находится в текущем каталоге.

#### Запуск Docker-контейнера:
```sh
docker run -d -p 8080:8080 notes-keeper
```

Где:

-d – запускает контейнер в фоновом режиме (detached mode).
-p 8080:8080 – перенаправляет порт 8080 на хосте в порт 8080 внутри контейнера.
notes-keeper – это имя Docker-образа, который был создан на предыдущем шаге.
## Проверка работы приложения
#### Регистрация пользователя
Запрос:
```sh
curl -X POST http://localhost:8080/note-keeper/api/register \
-H 'Content-Type: application/json' \
-d '{"username":"my_username","password":"my_password"}'
```
###### Ответ:
При удачной регистрации будет возвращен код 200. Если пользователь уже существует, будет возвращена ошибка о том, что такой пользователь уже есть.

#### Вход в систему
Запрос:
```sh
curl -X POST http://localhost:8080/note-keeper/api/login \
-H 'Content-Type: application/json' \
-d '{"username":"my_username","password":"my_password"}'
```
###### Ответ:
При успешном входе будет возвращен код 200, и в куки файлы будет записан токен пользователя, который будет использоваться для дальнейшей работы с заметками.

#### Получение ID пользователя
Запрос:
```sh
curl -X POST http://localhost:8080/note-keeper/api/get_user_id \
-H 'Content-Type: application/json' \
-d '{"username":"my_username","password":"my_password"}'
```
#### Создание заметки
Запрос:
```sh
curl -b ./cookie -X POST http://localhost:8080/note-keeper/api/create \
-H 'Content-Type: application/json' \
-d '{"user_id":1,"text":"my_text"}'
```
###### Ответ:
При успешной записи заметки будет возвращен код 200. Если не удалось записать заметку, проверить текст на ошибки, или текст заметки был пустой - будет возвращена ошибка.

#### Получение списка заметок
Запрос:
```sh
curl -c ./cookie -X GET http://localhost:8080/note-keeper/api/notes
```
###### Ответ:
При успехе будет возвращен код 200 и JSON массив заметок похожий на этот:
```sh


[
{"Text":"my_text","Mistakes":null,"Id":1,"UserId":1}
]
```
